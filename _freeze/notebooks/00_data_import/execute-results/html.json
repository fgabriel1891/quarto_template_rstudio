{
  "hash": "03bef33e01ae6009dc18b3d170b03f73",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Importing Data\"\nformat: \n  html:\n    theme: \"flatly\" # A clean, flat theme suitable for scientific documents\n    toc: true # Enables table of contents\n    toc-depth: 3 # Adjusts depth of table of contents; change as needed\n    number-sections: true # Enables section numbering\n    fig-width: 6 # Sets default figure width to 6 inches\n    fig-height: 4 # Sets default figure height to 4 inches\n    fig-align: \"center\" # Centers figures\neditor: visual\nexecute:\n  eval: false\n  echo: true\n---\n\n\n\n# Dependencies\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nlibrary(tidyverse) # for data manipulation \nlibrary(sf) # for simple feature manipulation \nlibrary(vegan) # ecological analyses \nlibrary(cassandRa) # latent network analyses \n```\n:::\n\n\n# Species distribution data \n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# load data directory\npalm_all_files <- list.files(\"00_Data/00_species_distribution/Palm-distribution-ranges/Shapefiles/\", full.names = T)\n# get  shp files\npalm_shp_files <- palm_all_files[str_detect(palm_all_files, \".shp\")]\n# filter xml out\npalm_shp_files <- palm_shp_files[!str_detect(palm_shp_files, \".xml\")]\n\n# get map of biogeographic dominions on the Neotropics \n\nneotropics <- st_read('00_Data/03_Landscape/Morrone_Neotropics/Lowenberg_Neto_2014.shp')\n\ngrid <- st_make_grid(neotropics, cellsize = c(1, 1), what = \"polygons\", \n                     crs = sf::st_crs(st_read(palm_shp_files[1])))\n# Convert the grid to a simple feature collection\ngrid <- st_sf(grid)\n\n# get grid level assemblages for palms and mammals\n\npalm_grids <- readRDS(\"00_Data/00_species_distribution/gridded_palm_data.RDS\")\nmammal_grids <- readRDS(\"00_Data/00_species_distribution/gridded_mammal_data.RDS\")\n```\n:::\n\n\n# Species traits data \n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# get trait data for the Neotropics \n\npalm_traits <- read.csv('00_Data/01_species_traits/final_palm_trait.csv')\nmammal_traits <- read.csv('00_Data/01_species_traits/final_mammal_trait.csv')\n```\n:::\n\n\n\n# Species interaction data \n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# get available interaction data for the Neotropics \n\nint_data <- readRDS('00_Data/02_species_interactions/final_int_data.RDS')\npalm_trait_data <- palm_trait_data[complete.cases(palm_trait_data),]\nmammal_trait_data <- mammal_trait_data[complete.cases(mammal_trait_data),]\n\n# filter to match species between databasees\nint_data <- int_data %>% \n  filter(int_data$PALM %in% palm_trait_data$SpecName,\n         int_data$FRUGIVORE %in% mammal_trait_data$Scientific)\n\n# make binary matrix\n\nN <- int_data %>% \n  xtabs(~PALM + FRUGIVORE, .)\n\nN[N>1] <- 1\n```\n:::\n\n\n\nFiltering species trait data for which we have also interaction records\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\npalm_trait_data <- palm_trait_data %>% \n  filter(palm_trait_data$SpecName %in% int_data$PALM )\n\n\nmammal_trait_data <- mammal_trait_data %>% \n  filter(mammal_trait_data$Scientific %in% int_data$FRUGIVORE )\n```\n:::\n\n\nObserve data imbalance\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nc(\n  'traits palms' = palm_trait_data$SpecName %>% unique() %>% length(),\n  'traits mammals' = mammal_trait_data$Scientific %>% unique() %>% length(),\n  'interaction palms' = int_data$PALM %>% unique() %>% length(),\n  'interaction mammals' = int_data$FRUGIVORE %>% unique() %>% length()\n) %>% barplot(log = 'y',\n              ylab = 'log (species count)',\n              col = c('green', 'firebrick', 'green', 'firebrick'))\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}